(this["webpackJsonpredata-ui-ts"]=this["webpackJsonpredata-ui-ts"]||[]).push([[0],{186:function(e,t,a){},187:function(e,t,a){},190:function(e,t,a){},279:function(e,t,a){},291:function(e,t,a){"use strict";a.r(t);var n,s=a(8),c=a.n(s),r=a(178),i=a.n(r),o=(a(186),a(187),a(23)),l=a(2),d=function(){return Object(l.jsx)(c.a.Fragment,{children:Object(l.jsx)(o.a,{})})},m=a(49),h=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,311)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))},x=c.a.createContext({anomalies:[],metrics:[],schema_changes:[],aggregated_metrics:new Map,aggregated_alerts:new Map,graph:null,generated_at:""}),j=a(60),b=a.n(j),p=a(39),u="YYYY-MM-DD",g=function(e){return e.replaceAll('"',"").replaceAll("`","")},f=function(e,t){if(!e)return"";var a=e.split("."),n={database:0,schema:1,tableName:2,columnName:3,metricName:4}[t];return!n||n>=a.length?"":a[n]},v=function(e){var t=e.last_value>e.last_avg?"greater than":"less than",a=(Math.abs(e.last_value-e.last_avg)/e.last_avg*100).toFixed(2),n=e.column_name?"".concat(e.metric,"(").concat(e.column_name,")"):"".concat(e.metric);return"".concat(n," is ").concat(a,"% ").concat(t," average")},O=function(e){if("freshness"===e.metric){var t=e.last_value/60/60;return"".concat(t.toFixed(2)," hours")}return e.metric.indexOf("percent")>-1?"".concat(e.last_value.toFixed(2),"%"):e.metric.indexOf("count")>-1?"".concat(e.last_value):"".concat(e.last_value.toFixed(2))},w=function(e){return"freshness"===e.metric?e.value/60/60:e.value},y=function(e){return"freshness"===e?"{value} hours":e.indexOf("percent")>-1?"{value}%":"{value}"},N=function(e){var t="";switch(e.operation){case"column_added":t="column ".concat(e.column_name," of type ").concat(e.data_type," was added");break;case"column_removed":t="column ".concat(e.prev_column_name," of type ").concat(e.prev_data_type," was removed");break;case"type_change":t="".concat(e.column_name," column data type was changed from ").concat(e.prev_data_type," to \n            ").concat(e.data_type);break;default:t=""}return t},_=function(){var e="YYYY-MM-DD HH:mm:ss",t=Object(s.useContext)(x),a=t.anomalies,n=t.schema_changes;return Object(l.jsxs)("div",{className:"grid grid-cols-1",children:[Object(l.jsx)("h1",{className:"pl-3 mb-3 text-2xl",children:"Alerts"}),Object(l.jsx)("div",{className:"flex flex-col",children:Object(l.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Object(l.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Object(l.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:Object(l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[Object(l.jsx)("thead",{className:"bg-gray-50",children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Model"}),Object(l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Message"}),Object(l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric Value"}),Object(l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Window"}),Object(l.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:Object(l.jsx)("span",{className:"sr-only",children:"Details"})})]})}),Object(l.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[a.map((function(t){return Object(l.jsxs)("tr",{children:[Object(l.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[Object(l.jsx)("span",{className:"badge mb-3 bg-red-600 rounded-full px-2.5 py-1 text-center object-right-top text-white text-sm mr-3",children:"!"}),Object(l.jsx)("span",{className:"text-sm text-gray-900",children:g(t.table_name)})]}),Object(l.jsx)("td",{className:"px-6 text-sm py-4 whitespace-nowrap",children:Object(l.jsx)("div",{className:"text-gray-900",children:v(t)})}),Object(l.jsx)("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:O(t)}),Object(l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b()(t.time_window_end).format(e)}),Object(l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:Object(l.jsx)(m.b,{to:"/graph?model="+g(t.table_name),className:"text-indigo-600 hover:text-indigo-900",children:"Details"})})]},t.id)})),n.map((function(t){return Object(l.jsxs)("tr",{children:[Object(l.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[Object(l.jsx)("span",{className:"badge mb-3 bg-yellow-300 rounded-full px-2.5 py-1 text-center object-right-top text-white text-sm mr-3",children:"!"}),Object(l.jsx)("span",{className:"text-sm text-gray-900",children:g(t.table_name)})]}),Object(l.jsx)("td",{className:"px-6 text-sm py-4 whitespace-nowrap",children:Object(l.jsx)("div",{className:"text-gray-900",children:N(t)})}),Object(l.jsx)("td",{className:"px-6 py-4 text-sm whitespace-nowrap"}),Object(l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b()(t.detected_time).format(e)}),Object(l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:Object(l.jsx)(m.b,{to:"/graph?model="+g(t.table_name),className:"text-indigo-600 hover:text-indigo-900",children:"Details"})})]},t.id+"_"+t.prev_column_name)}))]})]})})})})})]})},M=a(155),k=a.n(M),A=a(179),S=a(33),C=function(){return Object(l.jsxs)(c.a.Fragment,{children:[Object(l.jsx)("input",{type:"checkbox",id:"menu-open",className:"hidden"}),Object(l.jsx)("label",{htmlFor:"menu-open",className:"absolute right-2 bottom-2 shadow-lg rounded-full p-2 bg-gray-100 text-gray-600 md:hidden","data-dev-hint":"floating action button",children:Object(l.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),Object(l.jsxs)("header",{className:"bg-gray-600 text-gray-100 flex justify-between md:hidden","data-dev-hint":"mobile menu bar",children:[Object(l.jsx)("a",{href:"/",className:"block p-4 text-white font-bold whitespace-nowrap truncate",children:"re_data"}),Object(l.jsxs)("label",{htmlFor:"menu-open",id:"mobile-menu-button",className:"m-2 p-2 focus:outline-none hover:text-white hover:bg-gray-700 rounded-md",children:[Object(l.jsx)("svg",{id:"menu-open-icon",className:"h-6 w-6 transition duration-200 ease-in-out",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),Object(l.jsx)("svg",{id:"menu-close-icon",className:"h-6 w-6 transition duration-200 ease-in-out",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]})]})},L=a(297),E=a(298),D=a(299),F=a(300),Y=function(){return Object(l.jsxs)("aside",{id:"sidebar",className:"bg-gray-800 text-gray-100 md:w-32 w-3/4 min-w-min space-y-6 pt-6 px-0 absolute inset-y-0 left-0 transform md:relative md:translate-x-0 transition duration-200 ease-in-out  md:flex md:flex-col md:justify-between max-h-screen overflow-y-auto","data-dev-hint":"sidebar; px-0 for frameless; px-2 for visually inset the navigation",children:[Object(l.jsxs)("div",{className:"flex flex-col space-y-6","data-dev-hint":"optional div for having an extra footer navigation",children:[Object(l.jsx)("a",{href:"#/alerts",className:"text-white flex items-center space-x-2 px-8",title:"Your App is cool",children:Object(l.jsx)("span",{className:"text-2xl font-extrabold whitespace-nowrap truncate",children:Object(l.jsx)("img",{alt:"re_data",className:"w-14",src:"redata.svg"})})}),Object(l.jsxs)("nav",{"data-dev-hint":"main navigation",children:[Object(l.jsxs)(m.b,{to:"alerts",className:"flex items-center space-x-2 py-2 px-4 transition duration-200 hover:bg-gray-700 hover:text-white",children:[Object(l.jsx)(L.a,{size:"1.25em"}),Object(l.jsx)("span",{children:"Alerts"})]}),Object(l.jsxs)(m.b,{to:"graph",className:"flex items-center space-x-2 py-2 px-4 transition duration-200 hover:bg-gray-700 hover:text-white",children:[Object(l.jsx)(E.a,{size:"1.25em"}),Object(l.jsx)("span",{children:"Graph"})]})]})]}),Object(l.jsxs)("nav",{"data-dev-hint":"second-main-navigation or footer navigation",children:[Object(l.jsxs)("a",{href:"https://www.getre.io/slack",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 py-2 px-4 transition duration-200 hover:bg-gray-700 hover:text-white",children:[Object(l.jsx)(D.a,{size:"1.25em"}),Object(l.jsx)("div",{children:"Slack"})]}),Object(l.jsxs)("a",{href:"https://re-data.github.io/re-data/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 py-2 px-4 transition duration-200 hover:bg-gray-700 hover:text-white",children:[Object(l.jsx)(F.a,{size:"1.25em"}),Object(l.jsx)("span",{children:"Docs"})]}),Object(l.jsx)("div",{className:"flex items-center space-x-2 py-2 px-4 transition duration-200 hover:bg-gray-700 hover:text-white",children:Object(l.jsx)("span",{className:"italic",children:"version 0.4.0"})})]})]})},I=function(e){var t,a=e.metrics,n=new Map,s=Object(p.a)(a);try{for(s.s();!(t=s.n()).done;){var c=t.value,r=g(c.table_name),i=g(c.column_name),o=g(c.metric);n.has(r)||n.set(r,{tableMetrics:new Map,columnMetrics:new Map});var l=n.get(r);if(i){var d="".concat(r,".").concat(i,".").concat(o);l.columnMetrics.has(d)?l.columnMetrics.get(d).push(c):l.columnMetrics.set(d,[c])}else{var m="".concat(r,"._.").concat(o);l.tableMetrics.has(m)?l.tableMetrics.get(m).push(c):l.tableMetrics.set(m,[c])}}}catch(A){s.e(A)}finally{s.f()}var h,x=Object(p.a)(n.values());try{for(x.s();!(h=x.n()).done;){var j,u=h.value,f=Object(p.a)(u.tableMetrics);try{for(f.s();!(j=f.n()).done;){var v=Object(S.a)(j.value,2),O=v[0],w=v[1].sort((function(e,t){return b()(e.time_window_end).diff(t.time_window_end)}));u.tableMetrics.set(O,w)}}catch(A){f.e(A)}finally{f.f()}var y,N=Object(p.a)(u.columnMetrics);try{for(N.s();!(y=N.n()).done;){var _=Object(S.a)(y.value,2),M=_[0],k=_[1].sort((function(e,t){return b()(e.time_window_end).diff(t.time_window_end)}));u.columnMetrics.set(M,k)}}catch(A){N.e(A)}finally{N.f()}}}catch(A){x.e(A)}finally{x.f()}return n},R=function(e){var t,a=e.anomalies,n=e.schema_changes,s=new Map,c=Object(p.a)(a);try{for(c.s();!(t=c.n()).done;){var r=t.value,i=g(r.table_name);r.last_value=Number(r.last_value);var o=r.column_name?r.column_name:"_";if(!s.has(i)){var l={anomalies:new Map,schemaChanges:new Map};s.set(i,l)}var d=s.get(i).anomalies;d.has(o)?d.get(o).push(r):d.set(o,[r])}}catch(v){c.e(v)}finally{c.f()}var m,h=Object(p.a)(n);try{for(h.s();!(m=h.n()).done;){var x=m.value,j=g(x.table_name),b=x.column_name;if(!s.has(j)){var u={anomalies:new Map,schemaChanges:new Map};s.set(j,u)}var f=s.get(j).schemaChanges;f.has(b)?f.get(b).push(x):f.set(b,[x])}}catch(v){h.e(v)}finally{h.f()}return s},H=function(){var e={anomalies:[],metrics:[],schema_changes:[],aggregated_metrics:new Map,aggregated_alerts:new Map,graph:null,generated_at:""},t=Object(s.useState)(e),a=Object(S.a)(t,2),n=a[0],c=a[1],r=function(){var e=Object(A.a)(k.a.mark((function e(){var t,a,n,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("re_data_overview.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,n=a[0],(s={anomalies:n.anomalies?JSON.parse(n.anomalies):[],metrics:n.metrics?JSON.parse(n.metrics):[],schema_changes:n.schema_changes?JSON.parse(n.schema_changes):[],aggregated_metrics:new Map,aggregated_alerts:new Map,graph:JSON.parse(n.graph),generated_at:n.generated_at}).aggregated_metrics=I(s),s.aggregated_alerts=R(s),console.log(s),c(s),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("Unable to load overview file"),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){r()}),[]),Object(l.jsx)(x.Provider,{value:n,children:Object(l.jsxs)("div",{className:"relative min-h-screen md:flex","data-dev-hint":"container",children:[Object(l.jsx)(C,{}),Object(l.jsx)(Y,{}),Object(l.jsx)("main",{id:"content",className:"flex-1 p-6 lg:px-8 bg-gray-100 max-h-screen overflow-y-auto",children:Object(l.jsx)("div",{className:"max-w-full mx-auto h-full",children:Object(l.jsx)("div",{className:"px-4 py-6 sm:px-0 h-full",children:Object(l.jsx)(o.a,{})})})})]})})},T=(a(190),a(180)),z=a.n(T),B=function(e){var t=Object(s.useState)(null),a=Object(S.a)(t,2),n=a[0],c=a[1],r=Object(m.c)(),i=Object(S.a)(r,1)[0].get("model");i&&n&&n.selectNodes([i],!0);return Object(l.jsx)("div",{className:"col-span-8",children:e.overviewDataLoaded?Object(l.jsx)(z.a,{data:e.data,options:e.networkOptions,events:e.events,getNetwork:function(e){c(e),console.log(e)}}):Object(l.jsx)(l.Fragment,{})})},G=Object(s.memo)(B,(function(e){return!!e.overviewDataLoaded})),J=a(51),W=a(304),P=a(309),V=a(301),U=a(307),q=a(302),K=a(305),Q=a(303),X=a(306),Z=a(310),$=a(308),ee=(a(279),a(181)),te=function(e){var t,a=[],n=Object(p.a)(e.alerts.schemaChanges.values());try{for(n.s();!(t=n.n()).done;){var s=t.value;a.push.apply(a,Object(ee.a)(s))}}catch(c){n.e(c)}finally{n.f()}return Object(l.jsx)("div",{className:"mb-3 grid grid-cols-1",children:Object(l.jsx)("div",{className:"flex flex-col",children:Object(l.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Object(l.jsx)("div",{className:"py-2 align-middle inline-block max-w-full sm:px-6 lg:px-8",children:Object(l.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:Object(l.jsxs)("table",{className:"max-w-full divide-y divide-gray-200",children:[Object(l.jsx)("thead",{className:"bg-gray-50",children:Object(l.jsx)("tr",{children:Object(l.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Schema Changes"})})}),Object(l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((function(e){return Object(l.jsx)("tr",{children:Object(l.jsx)("td",{className:"px-6 text-sm py-4 whitespace-nowrap",children:Object(l.jsxs)("div",{className:"text-gray-900",children:[Object(l.jsx)("span",{className:"badge mb-3 bg-yellow-300 rounded-full px-2 py-1 text-center object-right-top text-white text-sm mr-1",children:"!"}),N(e)," at ",b()(e.detected_time).format("YYYY-MM-DDTHH:mm:ss")]})})},e.id+"_"+e.prev_column_name)}))})]})})})})})})},ae=a(148),ne=a.n(ae),se=a(125),ce=function(e,t,a){var n,s=[],c=e.anomalies,r=c.has(t)?c.get(t):c.has("")?c.get(""):[],i=Object(p.a)(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.metric===a&&s.push([{xAxis:b()(o.time_window_end).subtract(o.interval_length_sec,"s").format(u)},{xAxis:b()(o.time_window_end).format(u)}])}}catch(l){i.e(l)}finally{i.f()}return s},re=function(e,t,a){for(var n=[],s=t.anomalies,c=s.has(a)?s.get(a):[],r=new Set(c.map((function(e){return"".concat(e.metric,"_").concat(e.time_window_end)}))),i=0;i<e.length;i++){var o=e[i],l="".concat(o.metric,"_").concat(o.time_window_end);r.has(l)&&n.push({gt:i-1,lte:i})}return n},ie=function(e){var t=e.alerts.anomalies,a=[],n=[],s=Array.from(e.data.tableMetrics).map((function(n){var s=Object(S.a)(n,2),c=s[0],r=s[1],i=f(c,"metricName"),o=f(c,"columnName"),d=re(r,e.alerts,o),m={title:{text:"".concat(f(c,"metricName"))},grid:{top:"20%",right:"5%",bottom:"12%",left:"12%"},xAxis:{type:"category",data:r.map((function(e){return b()(e.time_window_end).format(u)}))},yAxis:{type:"value",axisLabel:{formatter:y(i)}},series:[{name:f(c,"metricName"),data:r.map(w),type:"line",color:"#8884d8",smooth:!0,markArea:{itemStyle:{color:"rgba(255, 173, 177, 0.4)"},data:ce(e.alerts,o,i)}}],tooltip:{trigger:"axis"},visualMap:{show:!1,dimension:0,pieces:d,inRange:{color:d.length?"#ee2828":"#8884d8"},outOfRange:{color:"#8884d8"}}};if(t.has(o)){var h,x=t.get(o),j=Object(p.a)(x);try{for(j.s();!(h=j.n()).done;){h.value.metric===i&&a.push([c,m])}}catch(g){j.e(g)}finally{j.f()}}return Object(l.jsx)("div",{children:Object(l.jsx)(ne.a,{echarts:se,option:m})},c)})),r=Array.from(e.data.columnMetrics).map((function(s){var c=Object(S.a)(s,2),r=c[0],i=c[1],o=f(r,"metricName"),d=f(r,"columnName");n.length||(n=i.map((function(e){return e.time_window_end})));var m=re(i,e.alerts,d),h={title:{text:"".concat(f(r,"metricName"),"(").concat(f(r,"columnName"),")")},grid:{top:"20%",right:"5%",bottom:"12%",left:"12%"},xAxis:{type:"category",data:i.map((function(e){return b()(e.time_window_end).format(u)}))},yAxis:{type:"value",axisLabel:{formatter:y(o)}},series:[{name:o,data:i.map(w),type:"line",color:"#8884d8",smooth:!0,markArea:{itemStyle:{color:"rgba(255, 173, 177, 0.4)"},data:ce(e.alerts,d,o)}}],tooltip:{trigger:"axis"},visualMap:{show:!1,dimension:0,pieces:m,inRange:{color:m.length?"#ee2828":"#8884d8"},outOfRange:{color:"#8884d8"}}};if(t.has(d)){var x,j=t.get(d),g=new Set,v=Object(p.a)(j);try{for(v.s();!(x=v.n()).done;){var O=x.value;O.metric!==o||O.column_name!==d||g.has(r)||(a.push([r,h]),g.add(r))}}catch(N){v.e(N)}finally{v.f()}}return Object(l.jsx)("div",{children:Object(l.jsx)(ne.a,{echarts:se,option:h})},r)})),i=a.map((function(e){var t=Object(S.a)(e,2),a=t[0],n=t[1];return a="alert_".concat(a),Object(l.jsx)("div",{children:Object(l.jsx)(ne.a,{echarts:se,option:n})},a)}));return Object(l.jsx)(c.a.Fragment,{children:e.showAnomalies?Object(l.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg p-4 mt-3 mb-3",children:i}):Object(l.jsxs)("div",{children:[Object(l.jsx)("span",{className:"text-lg text--capitalize",children:"Table Metrics"}),Object(l.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg p-4 mt-3 mb-3",children:s}),Object(l.jsx)("span",{className:"text-lg text--capitalize",children:"Column Metrics"}),Object(l.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg p-4 mt-3 mb-3",children:r})]})})};J.a([W.a,P.a,V.a,U.a,q.a,K.a,Q.a,$.a,X.a,Z.a]),function(e){e.ANOMALIES="anomalies",e.SCHEMA_CHANGES="schema_changes",e.METRICS="metrics"}(n||(n={}));var oe=function(){var e=Object(m.c)(),t=Object(S.a)(e,1)[0],a=Object(s.useState)(n.ANOMALIES),c=Object(S.a)(a,2),r=c[0],i=c[1],o=!1,d=t.get("model"),h=Object(s.useContext)(x),j={tableMetrics:new Map,columnMetrics:new Map},b={anomalies:new Map,schemaChanges:new Map};return"string"===typeof d&&h.aggregated_metrics.has(d)&&(o=!0,j=h.aggregated_metrics.get(d),h.aggregated_alerts.has(d)&&(b=h.aggregated_alerts.get(d))),Object(l.jsx)("div",{className:"col-span-4 h-auto overflow-scroll",children:Object(l.jsx)("div",{className:"bg-white rounded shadow border p-3",children:Object(l.jsxs)("div",{children:[Object(l.jsxs)("ul",{className:"nav",children:[Object(l.jsx)("li",{className:r===n.METRICS?"active":"",onClick:function(){return i(n.METRICS)},children:"Metrics"}),Object(l.jsx)("li",{className:r===n.ANOMALIES?"active":"",onClick:function(){return i(n.ANOMALIES)},children:"Anomalies"}),Object(l.jsx)("li",{className:r===n.SCHEMA_CHANGES?"active":"",onClick:function(){return i(n.SCHEMA_CHANGES)},children:"Schema"})]}),Object(l.jsx)("div",{className:"mb-2",children:Object(l.jsx)("span",{className:"text-2xl text--capitalize font-bold",children:f(d,"tableName")})}),Object(l.jsx)("div",{className:"outlet",children:o?function(e,t,a){return e===n.METRICS?Object(l.jsx)(ie,{data:t,alerts:a,showAnomalies:!1}):e===n.ANOMALIES?Object(l.jsx)(ie,{data:t,alerts:a,showAnomalies:!0}):Object(l.jsx)(te,{alerts:a})}(r,j,b):Object(l.jsx)("span",{children:"Click on node to show metrics, anomalies or schema changes"})})]})})})},le=function(){var e=Object(s.useContext)(x),t=!!e.graph,a=function(e){var t={nodes:[],edges:[]};if(!e.graph)return t;for(var a=e.graph.nodes,n=e.graph.sources,s=0,c=Object.entries(a);s<c.length;s++){var r=Object(S.a)(c[s],2),i=r[0],o=r[1],l=i.split("."),d=Object(S.a)(l,3),m=d[0],h=d[1],x=d[2];if("test"!==m&&"re_data"!==h){var j="".concat(o.database,".").concat(o.schema,".").concat(o.name),b={id:j,label:x,shape:"box"};t.nodes.push(b);var u,g=new Set(o.depends_on.nodes),f=Object(p.a)(g);try{for(f.s();!(u=f.n()).done;){var v=u.value,O=a[v]?a[v]:n[v];if(O){var w={from:"".concat(O.database,".").concat(O.schema,".").concat(O.name),to:j,arrows:"to"};t.edges.push(w)}}}catch(y){f.e(y)}finally{f.f()}}}return t}(e),n=Object(m.c)(),c=Object(S.a)(n,2),r=(c[0],c[1]),i={nodes:a.nodes,edges:a.edges},o={selectNode:function(e){if(console.log("node selected",e),e.nodes&&1===e.nodes.length){var t=e.nodes[0];r({model:t})}},deselectNode:function(e){r({})}};return Object(l.jsxs)("div",{className:"h-full",children:[Object(l.jsx)("h1",{className:"pl-3 mb-3 text-2xl",children:"Graph View"}),Object(l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-12 gap-4 border-2 border-solid border-gray-200 rounded-lg h-full",children:[Object(l.jsx)(G,{data:i,events:o,networkOptions:{height:"100%",width:"100%",edges:{color:{color:"#8884d8",highlight:"#8884d8",hover:"#8884d8",inherit:!1},dashes:!1,smooth:{type:"continuous",forceDirection:"none"}},nodes:{color:{border:"#8884d8",background:"#8884d8",highlight:"#392396",hover:{border:"#392396",background:"#8884d8"}},font:{color:"#ffffff"}},layout:{hierarchical:{enabled:!0,levelSeparation:485,nodeSpacing:50,treeSpacing:35,blockShifting:!1,edgeMinimization:!0,parentCentralization:!1,direction:"LR",sortMethod:"directed"}},interaction:{hover:!0,navigationButtons:!1,multiselect:!0,keyboard:{enabled:!0}},physics:{enabled:!1,hierarchicalRepulsion:{centralGravity:0},minVelocity:.75,solver:"hierarchicalRepulsion"}},overviewDataLoaded:t}),Object(l.jsx)(oe,{})]})]})};i.a.render(Object(l.jsx)(m.a,{children:Object(l.jsx)(o.d,{children:Object(l.jsx)(o.b,{path:"/",element:Object(l.jsx)(d,{}),children:Object(l.jsxs)(o.b,{path:"/",element:Object(l.jsx)(H,{}),children:[Object(l.jsx)(o.b,{path:"alerts",element:Object(l.jsx)(_,{})}),Object(l.jsx)(o.b,{path:"graph",element:Object(l.jsx)(le,{})})]})})})}),document.getElementById("root")),h()}},[[291,1,2]]]);
//# sourceMappingURL=main.43c3d2e9.chunk.js.map